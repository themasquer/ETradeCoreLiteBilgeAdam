@model ReportsIndexViewModel

@{
    ViewData["Title"] = "Index";
	Layout = "_ReportLayout";
}

<h1>@ViewData["Title"]</h1>

<form asp-action="Index" method="get">
	<div class="row" style="padding-top: 30px;">
		<div class="col-2">
			<b><label asp-for="Filter.CategoryId"></label></b>
		</div>
		<div class="col-4">
			<select asp-for="Filter.CategoryId" asp-items="Model.Categories" class="form-control">
				<option value="">-- All --</option>
			</select>
		</div>
		<div class="col-2">
			<b><label asp-for="Filter.StoreIds"></label></b>
		</div>
		<div class="col-4">
			<select multiple asp-for="Filter.StoreIds" asp-items="Model.Stores" class="form-control"></select>
		</div>
	</div>
	<div class="row" style="padding-top: 30px;">
		<div class="col-2">
			<b><label asp-for="Filter.UnitPriceMinimum"></label></b>
		</div>
		<div class="col-4">
			<div class="input-group">
				<input asp-for="Filter.UnitPriceMinimum" class="form-control"/>
				<span class="input-group-text">-</span>
				<input asp-for="Filter.UnitPriceMaximum" class="form-control"/>
			</div>
		</div>
		<div class="col-2">
			<b><label asp-for="Filter.ExpirationDateMinimum"></label></b>
		</div>
		<div class="col-4">
			<div class="input-group">
				<input asp-for="Filter.ExpirationDateMinimum" class="form-control expirationdate"/>
				<span class="input-group-text">-</span>
				<input asp-for="Filter.ExpirationDateMaximum" class="form-control expirationdate"/>
			</div>
		</div>
	</div>
	<div class="row" style="padding-top: 30px;">
		<div class="col-2">
			<b><label asp-for="Filter.ProductName"></label></b>
		</div>
		<div class="col-10">
			<input asp-for="Filter.ProductName" class="form-control"/>
		</div>
	</div>

	<div class="row" style="padding-top: 30px;">
		<div class="col-12">
			<button type="submit" class="btn btn-primary" id="search"> Search</button>
			&nbsp;&nbsp;&nbsp;
			<a asp-action="Index" class="btn btn-info"> Clear</a>
		</div>
	</div>

	<hr/>

	@if (Model.RecordsCount > 0)
	{
		<p class="bg-success text-white">@Model.RecordsCount products found</p>
		<table class="table table-striped table-hover table-bordered">
			<thead>
				<tr>
					<th>
						@Html.DisplayNameFor(model => model.Reports.FirstOrDefault().StoreName)
					</th>
					<th>
						@Html.DisplayNameFor(model => model.Reports.FirstOrDefault().CategoryName)
					</th>
					<th>
						@Html.DisplayNameFor(model => model.Reports.FirstOrDefault().ProductName)
					</th>
					<th>
						@Html.DisplayNameFor(model => model.Reports.FirstOrDefault().UnitPriceDisplay)
					</th>
					<th>
						@Html.DisplayNameFor(model => model.Reports.FirstOrDefault().StockAmount)
					</th>
					<th>
						@Html.DisplayNameFor(model => model.Reports.FirstOrDefault().ExpirationDateDisplay)
					</th>
				</tr>
			</thead>
			<tbody>
				@foreach (var item in Model.Reports) {
						<tr>
							<td>
								@Html.DisplayFor(modelItem => item.StoreName)
							</td>
							<td>
								@Html.DisplayFor(modelItem => item.CategoryName)
							</td>
							<td>
								@Html.DisplayFor(modelItem => item.ProductName)
							</td>
							<td>
								@Html.DisplayFor(modelItem => item.UnitPriceDisplay)
							</td>
							<td>
								@Html.DisplayFor(modelItem => item.StockAmount)
							</td>
							<td>
								@Html.DisplayFor(modelItem => item.ExpirationDateDisplay)
							</td>
						</tr>
				}
			</tbody>
		</table>
	}
	else
	{
		<p class="bg-danger text-white">No products found</p>
	}
</form>